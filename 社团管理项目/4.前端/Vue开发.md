[toc]

# 项目简介

## 项目概述

**社团管理系统**是用Vue框架开发的单页面应用项目。

[Github地址](https://github.com/tongji4m3/communityVue)

[网站部署地址](http://47.103.203.188:8080/dist/index.html#/welcome)

## 项目选型

+ Vue.js
+ Vue-cli
+ Vue Router 
+ Vuex
+ Element-UI
+ Axios

## 实用工具

+ PostMan 测试后端接口

+ [Swagger](http://139.9.134.43:5000/swagger/index.html) 查看后端提供的接口

+ Mock.js 拦截`Axios`请求再生成随机数据响应

## 相关指令

+ 项目启动：`npm run serve`



# 项目架构

## main.js

+ 导入App.vue

+ 导入router和store

+ 导入element-ui

+ 导入全局样式表，global.css

+ 导入全局api

+ 导入axios

+ 配置了拦截器，使得每次请求头携带token

## App.vue

+ 单页面入口

+ 只放置了一个路由占位符

## assets

### config

文件夹内主要为`api.js`。保存了与后端交换的相关信息,包括请求根路径,请求具体地址,api说明,请求参数,响应参数等。

### css

文件夹内主要为`global.css`,全局样式表

### img

存储了项目用到的所有图片

## components

## router

+ 导入首页，学生页面，负责人页面，管理员页面对应的组件
+ 配置了视图和他们组件的路由
+ 当访问项目时,自动重定向到`index/welcome`组件
+ 配置了拦截路由，如果不是在登录/注册/首页,而且用户没有登录，则自动跳转到welcome首页

## store

未使用

## views

views下放置了主要的四个视图:首页，学生页面，负责人页面，管理员页面

每个视图各自的组件放在components文件夹下的对应文件夹里

### index.vue

+ `<template>`放置页面
+ `<script>`放置数据和函数
+ `<style scoped>`放置CSS样式，scoped代表只在当前页面生效
+ 上方放置了导航条,可以跳转到登录/注册/首页页面
+ 下方为主体区域,放置路由占位符,即跳转登录/注册/首页组件时显示的位置

### StudentHome.vue

+ 导航栏包括修改密码，系统消息，系统公告，退出四个按钮
+ 侧边栏包括个人信息管理，社团信息查询，已加入社团，参加活动四个组件
+ 下方为主体区域,放置路由占位符,即跳转到上述四个组件时显示的位置
+ 数据区包含了username，它在登录时存储的数据中取出用户名
+ 函数区包含修改密码，系统消息，系统公告，退出四个按钮点击后执行的函数,其中退出按钮清空了所有存储的数据并跳转首页

### PrincipalHome.vue

+ 导航栏包括修改密码，系统消息，系统公告，退出四个按钮
+ 侧边栏包括负责人首页，社团信息,管理(公告管理,活动管理,成员管理)，审核(入社人员审核,活动人员审核),换届,赞助申报组件
+ 下方为主体区域,放置路由占位符,即跳转到上述组件时显示的位置
+ 数据区包含了username，它在登录时存储的数据中取出用户名，以及控制
+ 函数区包含修改密码，系统消息，系统公告，退出四个按钮点击后执行的函数,其中退出按钮清空了所有存储的数据并跳转首页

### AdminHome.vue

+ 导航栏包括修改密码，退出两个按钮
+ 侧边栏包括社团制度,系统公告管理,社团管理(社团学生管理,社团信息管理),社团审核(社团活动审核,社团赞助审核)组件
+ 下方为主体区域,放置路由占位符,即跳转到上述组件时显示的位置
+ 数据区包含了username，它在登录时存储的数据中取出用户名，以及控制
+ 函数区包含修改密码，退出按钮点击后执行的函数,其中退出按钮清空了所有存储的数据并跳转首页
## vue.config.js
通过vue-cli 3.0工具生成的项目,默认隐藏了所有webpack的配置项
如果需要修改默认配置,则可以在项目根目录下,创建配置文件` vue.config.js`


# 项目实现

## 登录功能

### 业务流程

1. 在登录页面输入用户名,密码
2. 调用后台接口进行校验
3. 通过校验后,根据后台的响应状态跳转到项目主页

### 说明

1. http是无状态的,且前后端存在跨域问题,要记录登录信息,则使用token方式维持状态
2. 登录时,服务器验证通过后会生成该用户token并返回,客户端会存储token,后续所有请求都会携带该token发送请求,服务器再验证token是否通过









 

 

## 负责人活动组件

### 视图

#### 面包屑

导航到前面路径

#### 卡片

+ 搜索:搜索确定时,将携带query搜索特定内容的活动,搜索取消时也会刷新搜索页面。触发`getActivityList`函数
+ 添加活动:触发`showAddActivity`函数

#### 活动列表

+ 只展示活动名称和活动位置
+ 查看按钮会调用showDialog显示单个活动详情页面
+ 修改按钮会调用showEditDialog显示修改页面
+ 删除调用removeById函数删除活动

#### 添加活动对话框
通过addDialogVisible来控制显示与隐藏
数据绑定到addForm中，绑定验证规则对象addFormRules 表单校验项的引用为addFormRef
确定添加时触发addActivity函数，取消添加时触发cancelAdd函数

#### 展示活动对话框

#### 修改活动对话框

#### 分页区域

### 数据

+ activityList： 获取活动列表参数对象
+ query：可以查询活动名称
+ pageNumber，pageSize，totalCount：分页相关
+ addDialogVisible,editDialogVisible,showDialogVisible :控制添加,修改,展示活动对话框的显示与隐藏
+ addForm 添加活动表单数据

### 校验

+ 额外写了两个检验规则，分别校验活动经费和活动开销
+ 其余的添加活动校验规则，一般都有必填和格式验证两种情况


### 函数
#### created()
一开始就显示活动列表
#### getActivityList()
获取活动列表

#### handleSizeChange（），handleCurrentChange()

分页查询相关

#### showAddActivity()

显示添加活动对话框，会先清空表单的校验项以及`addForm`的内容

####  addActivity()

点击确定按钮后,触发的添加活动函数。会先判断是否校验成功，添加成功后，隐藏添加活动对话框，并且重新获取活动列表

#### cancelAdd()

添加活动框里面的取消添加活动按钮触发的事件
#### showDialog()
根据活动ID,展示活动具体信息,因为后端有些字段对应不上,需要进行转换
#### closeDialogVisible()
显示活动详情页面按确定后的触发事件
#### showEditDialog()
修改活动页面弹出后,会查询要修改的id所对应活动的内容
#### editActivity()
实现具体的修改活动操作
#### cancelEdit()
取消修改活动
#### removeById()
根据活动ID删除活动

 # 感想

1. 小组需要先头脑风暴，充分交流意见。把需求先完全敲定，把用例图,用例规约等规定下来，建立数据库
2. 分工要明确。且不要立刻开始写代码，要先不断讨论，完善业务逻辑，使得业务逻辑各种细节经得住推敲。接下来根据分工前后端对接进行讨论
3. 前后端组长要先把框架搭建好,并且定下小组内的代码规范,接口规范等
4. 前后端交接的人要充分交流需求,把接口按规范约定好,再讨论细节问题。最后小组再汇总，完成需求分析，之后再开始具体实现。 
5. 每周定下一个ddl,定时汇报,防止组员懒惰
6. 写代码时完善文档，并且写的时间不宜推太长，以免忘记细节。
7. 合理使用Git进行代码管理
8. 尽量使得与后端的交互只局限于很小的区域，这样后端修改代码或新增字段等可以尽可能少地修改